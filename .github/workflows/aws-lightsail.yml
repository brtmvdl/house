name: AWS Lightsail

on:
  workflow_dispatch:

jobs:
  aws:
    runs-on: ubuntu-latest
    steps:

      - name: Check out repository code
        uses: actions/checkout@v2

      - name: Download AWS CLI  
        run: docker pull amazon/aws-cli

      - name: Create key pair in Lightsail 
        run: sh ./aws.sh lightsail create-key-pair --key-pair-name key-pair-${{ github.run_id }}

      - name: List key pairs in Lightsail 
        run: sh ./aws.sh lightsail get-key-pairs

      - name: Get key pair in Lightsail 
        run: sh ./aws.sh lightsail get-key-pair --key-pair-name key-pair-${{ github.run_id }}

      - name: Delete key pair in Lightsail 
        run: sh ./aws.sh lightsail delete-key-pair --key-pair-name key-pair-${{ github.run_id }}
